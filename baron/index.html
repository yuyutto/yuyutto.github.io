<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>バロン ― キャラクター設定</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="../character.css" />
</head>
<body>
  <div class="container">
    <header class="hero">
      <div class="hero-content">
        <div class="hero-avatar">
          <img src="icon.png" alt="バロンのアイコン" class="avatar-image" />
        </div>
        <div class="hero-text">
          <h1 class="hero-title">バロン</h1>
          <p class="hero-subtitle">旧名：ミズキ ― 御魂流しの戦士</p>
        </div>
      </div>
    </header>

    <main class="main-grid">
      <section class="info-section">
        <div class="section-header">
          <h2 class="section-title">キャラクター情報</h2>
        </div>
        <div class="info-content">
          <div id="character-content">
            <!-- ここにMarkdown風コンテンツが挿入される -->
          </div>
        </div>
      </section>

      <section class="stories-section">
        <div class="section-header">
          <h2 class="section-title">ストーリー</h2>
        </div>
        <div id="story-filter-buttons" class="filter-buttons">
          <!-- フィルターボタンが挿入される -->
        </div>
        <div class="stories-grid" id="story-list">
          <!-- ここにストーリーリストが挿入される -->
        </div>
      </section>
    </main>
  </div>

  <script>
    // ========================================
    // ユーザーが編集する部分（ここだけ変更すればOK）
    // ========================================
    
    // キャラクター情報（Markdown風記法）
    const characterMarkdown = `

# プロフィール
- **フルネーム**: バロン
- **年齢**: 30歳手前ぐらいらしい……？
- **誕生日**: 7月5日
- **性別**: 男
- **身長**: 191cm
- **出身地**: 凍てついた渓谷の里、ジンメ
- **一人称**: オレ
- **二人称**: テメェ、オメェ 等
- **種族**: 人間
---

# 基本情報
- **職業**: 御魂流し（みたまながし）
- **性格**: お人好し
- **好きなもの**: 善い事　肉(特にハツ)
- **嫌いなもの**: 悪い事
---

# 外見イメージ
- **瞳の色・形**: 赤　四白眼　目つきが悪い
- **髪の色・髪型**: 白髪　ウェーブ
- **体格・肌の色**: でかい　がっしり気味　不健康な肌色
---

# 装備
## 武器：闇御津羽剣（くらみつはのつるぎ）
命を流れる水の如く操作することができる剣。
フランベルジュのような波打った刀身をしている。
---

# その他設定
## ペット
小さな青い兎型のガラス製ゴーレム。
小さなガラスの粒を食べる。
『穏やかな性格。日向が好き。あなたを見つめている。』

## 戦闘スタイル
血や命をリソースにした魔法戦
---

# 御魂流し（みたまながし）について
御魂流しとは、黒魔術やネクロマンシーの応用技術を使い生命力を操作することで、命の灯火消え逝く者に幾許か時間を与えたり、死者の聲を現世の者へ伝えることを生業としている者。

バロンはその御魂流しの中でも、他者へ生命力を流すことが苦手で、むしろ奪い取ったり破滅の命水を流し込む事が得意。

しかしバロンはこの自らの性質を嬉しく思っておらず、他者の助けになりたいと思っていた。
そんな自分が他者の為になるには、冒険者こそ天職なのではと考えている。

魔法使いは真名を知っている相手を自由にできるだとか、そういった危険を回避する為に偽名を使う。
**本名はミズキ。**<br>
---

# 人物像
出身地でも有名な、お人好しないい子。
誰かが笑顔になってくれる事が何よりの幸せ。

しかしあまりにも顔と口調が怖いので、基本第一印象はハチャメチャに悪い。
（アイコンは、冒険者になる時に撮った証明写真のようなものであり、「満面の笑顔でお願いしまーす」と言われた結果である）
---

# 技能・スキル

## ■ 活殺自在の構え （かっさつじざいのかまえ）
（QNスキル名：デストルドー）
> 廻黎によって自らを傷付ける際、意識を失わず耐える為の技能。
> 「一言芳恩と至心をおきて男の魂といふ刀一腰覚え給はず。吾は民の侍人也。」と心で唱え、小さな恩や真心の為に刀を振るうと信念を再確認し、精神力で踏ん張る技。
> つまるところプラシーボ効果とやせ我慢である。

## ■ "命之太刀" （いのちのたち）
（QNスキル名：ドゥーム）
> 御魂流しの技術を興したことで知られる剣豪、『ツァハラボーデン』が編み出したとされている技。
> 『命絶ち（いのちたち）』とも呼ばれ、一閃により刀身に永く溜め込んだ亡魂迷魂が放出され、相手の精魂を奪い去る。
> 溜め込んだ亡魂迷魂が───の通り、連続で放つことができる技ではない。
>  
> バロン「魂達がオレん為に戦ってくれんのは嬉しいけどよォ、オレとしちゃとっとと成仏して楽になって欲しいんだよなァ」
>  
> **発動時テキスト**: 亡魂迷魂が\\tの精魂を奪い去る！
> **発動時台詞**: 頼んだぜェ、魂達よォ！

## ■ 攻動一体 （こうどういったい）
（QNスキル名：シャドウボール）
> 攻防一体と動静一体の真理から、防と静を抜いたもの。
> 敢えて一切の防御行動を捨て、全力の剣撃を放つ。
> 荒御魂が相手の魂を傷付け、西洋で魔法と呼ばれる力への抵抗力が下がる。
> 
> **発動時テキスト**: \\nの全力の剣撃が、\\tの魂を傷付ける！
> **発動時台詞**: これがオレのォォォォ！全力ッゥゥゥ！！！

## ■ 廻黎 （めぐり）
（QNスキル名：ネクロポーテンス）
> 御魂流しが返魂の儀式を行う際の準備行動。
> 自らを傷付け刀に血を捧げることで、刀や己の力をより強く引き出すことができる。
> 命を流れる水のように操作できる闇御津羽剣だが、リソースに使用者の血液が必要不可欠。
> 戦闘では相手から奪った命を一度使用者の体内で血液とし、それを廻黎する必要がある。
> 
> バロン「これ、なんとか打魂消斬と廻黎で合わせて、斬っただけで使えるようにならンか？痛ェんだが」
> 
> **発動時テキスト**: \\nの血液が、闇御津羽剣に染み込んでいく！
> **発動時台詞**: ックソが痛ェ！が仕方ねェ！

## ■ "闇御津羽"（くらみつは）
（QNスキル名：ブラックホール）
> 渓谷の水源を象徴する龍の女神、闇御津羽を顕現させる。
> 現れた地点から大きく円を描き飛行し、激水が襲う。
> 闇御津羽は行動を終えると毎回バロンの元へ飛んできて、少女の姿に変身し、何かを耳元で囁いて笑顔で消滅し帰っていく。
> 
> バロン「ノーコメント。」
> 
> **発動時テキスト**: 龍が現れ、激水を発生させる！
> **発動時台詞**: 闇御津羽！頼むッ！

## ■ 吸魂 （きゅうこん）
（QNスキル名：ドレインライフ）
> 『打魂消斬（だこんしょうざん）』『魂結び（たまむすび）』の連携の便宜上の呼称。
> 打魂消斬は、斬った相手の魂を放出させる斬撃。ぶったまげる（打っ魂消る）が語源。
> 魂結びは、魂が体から浮かれ出るのを結び留めるまじない。両手首両足首に巻いている装身具により、無意識的な魂の流出を抑えている。
> これらを組み合わせることで、相手から溢れた魂を取り込み、体内に吸収している。
> 
> **発動時テキスト**: \\tの命を奪い取り、\\nの体が癒えてゆく！
> **発動時台詞**: 頂くぜェ！

## ■ 三瀬の爆走船頭
（QNスキル名：とんずら）
> 御魂流しは仕事柄、三途の川の船頭と仲が良く、冥府の魂を連れてきてもらうことがよくある。
> そんな船頭を船ごと現世に顕現させ、移動手段とするのだ。
> 渡し船に通常渡す六文は、鬼に狙われないギリギリのスピードの依頼賃だ。
> そう……高額を積めば、現世の爆速移動手段になるのである！
> これにより、現世の人間としては珍しく、閻魔大王から説教を受けた経験がある。
> 
> **発動時テキスト**: 浮遊する小舟が\\nを乗せ爆走する！
---

# 設定資料
**ツァハラボーデン**: 剣術の流派『鹿島新当流』を興した剣豪、塚原卜伝(つかはらぼくでん)が元ネタ。
- ツァハラ：アラビア語で何もない
- ボーデン：ドイツ語で地面、領域
---

# リンク集

## クレジット
[Picrew](https://picrew.me/image_maker/37153)
画像はこちらからお借りしております。

## イメージソング
[魂流し](https://w.atwiki.jp/hmiku/pages/36078.html)

## ジンメのある国
[Privatter](https://privatter.net/p/1238789)
    `;

    // ストーリーリスト
    const stories = [
      {
        title: "ジンメの御魂流し",
        subtitle: "赤き旅立ち、青き出会い",
        description: "序章",
        link: "story_0.html",
        tags: ["創作"]
      }
    ];

    // ========================================
    // 以下は自動処理部分（編集不要）
    // ========================================
    
    function parseMarkdown(markdown) {
      let html = markdown.trim();
      
      // Headers
      html = html.replace(/^### (.+)$/gm, '<h3>$1</h3>');
      html = html.replace(/^## (.+)$/gm, '<h2>$1</h2>');
      html = html.replace(/^# (.+)$/gm, '<h1>$1</h1>');
      
      // Bold
      html = html.replace(/\*\*(.+?)\*\*/g, '<strong>$1</strong>');
      
      // Links [text](url)
      html = html.replace(/\[([^\]]+)\]\(([^)]+)\)/g, '<a href="$2" target="_blank" rel="noopener noreferrer">$1</a>');
      
      // Horizontal rule
      html = html.replace(/^---$/gm, '<br><hr><br>');
      
      // QN skill names (薄い色のスタイル)
      html = html.replace(/^\（QNスキル名：(.+)\）$/gm, '<p class="qn-skill-name">（QNスキル名：$1）</p>');
      
      // Blockquotes (引用部分)
      // 引用ブロックを処理する関数
      html = html.replace(/(^>.*(\n|$))+/gm, (match) => {
        // 各行から > を除去し、内容を取得
        const lines = match.split('\n').filter(line => line.startsWith('>')).map(line => {
          // > の後の内容を取得（スペースも考慮）
          return line.replace(/^>\s?/, '');
        });
        
        // 各行を個別にpタグで処理（空行も保持）
        const paragraphs = [];
        
        for (let i = 0; i < lines.length; i++) {
          const line = lines[i];
          if (line.trim() === '') {
            // 空行の場合は空のpタグを追加してスペースを作る
            paragraphs.push(`<p class="empty-line"></p>`);
          } else {
            // 内容がある行は個別のパラグラフとして追加
            paragraphs.push(`<p>${line}</p>`);
          }
        }
        
        return `<blockquote>${paragraphs.join('')}</blockquote>`;
      });
      
      // Lists
      html = html.replace(/^- (.+)$/gm, '<li>$1</li>');
      html = html.replace(/(<li>.*<\/li>)/s, '<ul>$1</ul>');
      
      // Paragraphs
      html = html.replace(/^([^<\n].*)$/gm, '<p>$1</p>');
      
      // Clean up
      html = html.replace(/<p>(<h[1-6]>.*<\/h[1-6]>)<\/p>/g, '$1');
      html = html.replace(/<p>(<ul>.*<\/ul>)<\/p>/gs, '$1');
      html = html.replace(/<p>(<br><hr><br>)<\/p>/g, '$1');
      html = html.replace(/<p>(<blockquote>.*<\/blockquote>)<\/p>/gs, '$1');
      
      return html;
    }

    // フィルタリング用変数
    let currentStoryFilter = 'all';
    
    function renderStories(stories, filter = 'all') {
      const filteredStories = filter === 'all' 
        ? stories 
        : stories.filter(story => story.tags.includes(filter));
        
      return filteredStories.map(story => {
        const tagsHtml = story.tags
          .map(tag => `<span class="story-tag">${tag}</span>`)
          .join('');
          
        return `
          <div class="story-card">
            <div class="story-card-header">
              <h3 class="story-card-title">${story.title}</h3>
              <div class="story-card-tags">${tagsHtml}</div>
            </div>
            <p class="story-card-subtitle">${story.subtitle}</p>
            <p class="story-card-desc">${story.description}</p>
            <a href="${story.link}" class="story-card-cta">読む</a>
          </div>
        `;
      }).join('');
    }
    
    function getAllStoryTags() {
      const allTags = new Set();
      stories.forEach(story => {
        story.tags.forEach(tag => allTags.add(tag));
      });
      return Array.from(allTags).sort();
    }
    
    function createStoryFilterButtons() {
      const filterContainer = document.getElementById('story-filter-buttons');
      const allTags = getAllStoryTags();
      
      // 「すべて」ボタン
      const allButton = `<button class="filter-btn active" data-filter="all">すべて</button>`;
      
      // 各タグのボタン
      const tagButtons = allTags
        .map(tag => `<button class="filter-btn" data-filter="${tag}">${tag}</button>`)
        .join('');
      
      filterContainer.innerHTML = allButton + tagButtons;
      
      // フィルターボタンのクリックイベント
      filterContainer.addEventListener('click', (e) => {
        if (e.target.classList.contains('filter-btn')) {
          // アクティブ状態の切り替え
          document.querySelectorAll('#story-filter-buttons .filter-btn').forEach(btn => btn.classList.remove('active'));
          e.target.classList.add('active');
          
          // フィルター適用
          const filterValue = e.target.getAttribute('data-filter');
          currentStoryFilter = filterValue;
          document.getElementById('story-list').innerHTML = renderStories(stories, filterValue);
        }
      });
    }

    // ページ読み込み時に実行
    document.addEventListener('DOMContentLoaded', () => {
      // キャラクター情報を表示
      document.getElementById('character-content').innerHTML = parseMarkdown(characterMarkdown);
      
      // フィルターボタンを作成
      createStoryFilterButtons();
      
      // ストーリーリストを表示
      document.getElementById('story-list').innerHTML = renderStories(stories);
    });
  </script>
</body>
</html>